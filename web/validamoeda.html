<!DOCTYPE html>
<html>

<head>
    <style>
        * {
            box-sizing: border-box;
        }
    </style>
</head>

<body>
    <input type="text" id="valor" onkeyup="formatarMoeda()" />

    <script>
        function formatarMoeda() {
            var elemento = document.getElementById('valor');
            var valor = elemento.value;

            valor = valor + '';
            valor = parseInt(valor.replace(/[\D]+/g, ''));
            valor = valor + '';
            valor = valor.replace(/([0-9]{2})$/g, ",$1");

            if (valor.length > 6) {
                valor = valor.replace(/([0-9]{3}),([0-9]{2}$)/g, ".$1,$2");
            }
            debugger;
            if (valor != "NaN"){
                elemento.value = valor;
            }
            else{
                elemento.value = "";
            }
               
        }

    </script>

</body>

</html>